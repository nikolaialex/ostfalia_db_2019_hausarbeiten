# Kubernetes

## Infrastruktur

Aufgesetzt auf dem Betriebssystem läuft Kubernetes.
Der Administrator kommuniziert mit dem Kubernetes-Master, welcher die Tasks an die untergeordneten Nodes verteilt. Auf den Nodes laufen die Pods von Containern. Bei der Übergabe der Tasks von Master an Nodes, wird mit einer Vielzahl von Services gearbeitet, die automatisch entscheiden, welcher Node am besten für die Aufgabe geeignet ist. Der Node weist dann Ressourcen zu und legt die Pods in diesem Knoten fest, die die gewünschte Aufgabe durchführen sollen.


## Komponenten

Das Kubernetes-System besteht aus mehreren Bestandteilen, die in diesem Abschnitt näher erläutert werden sollen:

Kubernetes-Master
Der Kubernetes-Master ist für den Erhalt eines gewünschten Zustands eines Clusters verantwortlich. Er kontrolliert alle Kubernetes-Nodes und gibt die Task-Zuordnungen aus. Wenn man mit Kubernetes kommuniziert, spricht man immer mit dem Master.
Er besteht aus drei Prozessen, die auf einem einzelnen Node im Cluster ausgeführt werden, der als Master-Node bezeichnet wird. Diese Prozesse sind: kube-apiserver, kube-controller-manager und kube-scheduler.

Kubernetes-Node
Die Kubernetes-Nodes sind die Arbeitsmaschinen, auf denen die angeforderten und zugewiesenen Tasks und Cloud-Workflows ausgeführt werden. Nodes können je nach Cluster virtuelle oder physische Maschinen (Virtual Machines, physische Services usw.) sein. Nodes werden vom Kubernetes-Master kontrolliert.

Pods
Ein Pod ist eine Kubernetes-Abstraktion, die eine Gruppe von einem oder mehreren Anwendungscontainern und einigen gemeinsam genutzten Ressourcen für diese Container darstellt. 
Diese Ressourcen bestehen aus:
- Gemeinsamer Speicher, als Volumes
- Networking, als eindeutige Cluster-IP-Adresse
- Informationen zur Ausführung der einzelnen Container, wie z.B. die Container-Image-Version oder bestimmte Ports, die verwendet werden sollen


## Persistenz und Storage

Mit Kubernetes 1.3 wurde die automatische Speicherplatzzuordnung (Provisioning von Storage) für Container bereitgestellt. Der Storage wird als Persistent Volumes von Kubernetes bereitgestellt. Abhängig von der zugrunde liegenden Plattform, gibt es diese in verschieden Ausführungen. Läuft Kubernetes in der Google Cloud, bietet es die GCEPersistentDisk, bei Amazon den ElasticBlockStore und auf Azure das AzureFile oder die AzureDisk. Nachteilig dabei ist, dass sie die Abstraktion und Orchestrierung durch Kubernetes zunichtemachen und an den jeweiligen Cloudprovider binden. Es existieren Projekte wie bespielsweise “Rook"ein, die ebenfalls ein verteiltes Dateisystem betreiben, dies aber direkt auf dem Kubernetes-Cluster aufsetzen und somit weiteres Management überflüssig machen.


## Ressourcen

https://jaxenter.de/der-steuermann-fuers-containerschiff-65844
https://www.redhat.com/de/topics/containers/what-is-kubernetes
https://cloud.google.com/kubernetes-engine/docs/concepts/pod?hl=de
https://www.admin-magazin.de/Das-Heft/2018/06/Kubernetes-Storage-mit-Rook
https://kubernetes.io/docs/concepts/containers/runtime-class/

---

[<< Docker](2_docker.md) | [Inhaltsverzeichnis](inhaltsverzeichnis.md) | [Run Databases in Kubernetes >>](4_dbInK8s.md)

---
